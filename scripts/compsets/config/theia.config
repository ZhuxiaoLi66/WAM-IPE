#!/bin/bash

### THEIA SETUP ###

## some lsf/user defaults, should be loaded already but need some defaults just in case
export ACCOUNT=${ACCOUNT:-swpc}
export QUEUE=${QUEUE:-debug}

## initialize modules
. /apps/lmod/lmod/init/bash

## computational stuff
export TPN=${TPN:-24}
export MPICH_FAST_MEMCPY=${MPICH_FAST_MEMCPY:-"ENABLE"}
export MPI_BUFS_PER_PROC=${MPI_BUFS_PER_PROC:-2048}
export MPI_BUFS_PER_HOST=${MPI_BUFS_PER_HOST:-2048}
export MKL_NUM_THREADS=${MKL_NUM_THREADS:-1}

## system directories
export STMP=${STMP:-/scratch4/NCEPDEV/stmp4}
export PTMP=${PTMP:-/scratch4/NCEPDEV/stmp3}

## executables/scripts
export SIGHDR=${SIGHDR:-/scratch4/NCEPDEV/global/save/Shrinivas.Moorthi/para/sorc/global_sighdr.fd/global_sighdr}
export SFCHDR=${SIGHDR:-/scratch4/NCEPDEV/global/save/Shrinivas.Moorthi/para/sorc/global_sfchdr.fd/global_sfchdr}
export NEMSIOGET=${NEMSIOGET:-/scratch4/NCEPDEV/nems/save/Jun.Wang/nems/util/nemsio_get}
export APRUN=${APRUN:-`which mpirun`}
export PERL=${PERL:-perl}
export NDATE=${NDATE:-/scratch3/NCEPDEV/nwprod/util/exec/ndate}

## model-specific input directories
export DATADIR=${DATADIR:-/scratch4/NCEPDEV/nems/noscrub/emc.nemspara/RT/WAM-IPE/WAM-IPE_NEMS201606-20170131/data} # contains fix files and grids
export WAMINDIR=${WAMINDIR:-/scratch3/NCEPDEV/swpc/data/wam} # time-varying F10.7 and Kp

## PBS stuff
export SCHEDULER=${SCHEDULER:-"#PBS"}
export NAMEFLAG=${NAMEFLAG:-"-N ${JOBNAME}"}
export PROJFLAG=${PROJFLAG:-"-A ${ACCOUNT}"}
export WALLFLAG=${WALLFLAG:-"-l walltime=${WALLCLOCK}"}
export STDOUTFLAG=${STDOUT:-"-o ${ROTDIR}/fcst.%J"}
export STDERRFLAG=${STDERR:-"-e ${ROTDIR}/fcst.%J"}
export SELECTFLAG=${SELECT:-"-l procs=${TASKS}"}
export QUEUEFLAG=${QUEUE:-"-q ${QUEUE}"}

export EXTRA=${EXTRA:-"-W umask=027"}
